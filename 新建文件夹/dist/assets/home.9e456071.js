import{d as D,r as m,s as _,w as k,_ as C,o as v,c as g,a as e,t as o,b as h,v as M,F as w,e as F,f as b}from"./index.2412241b.js";const A=D({name:"home",setup(){let t=m([]),a=m(""),f=m(0),l=m([]),u=new WebSocket("ws://120.25.127.13:5055");u.onopen=()=>{let n={uname:_.state.uname,avatar:_.state.avatar,onlineUsers:0,msg:"\u7528\u6237\u6253\u5F00\u8FDE\u63A5!",Code:0};u.send(JSON.stringify(n)),c("\u670D\u52A1\u5668\u8FDE\u63A5\u6210\u529F!")},u.onmessage=n=>{let i=JSON.parse(n.data);if(i.Code===0)l.value.push(i);else if(i.Code===1)t.value.push(i);else if(i.Code===2){for(let r=0;r<l.value.length;r++)if(l.value[r].uname===i.uname){l.value.splice(r);break}c(`${i.uname}  \u79BB\u5F00\u4E86\u804A\u5929\u5BA4!`,"yellow")}};const p=()=>{let n={uname:_.state.uname,avatar:_.state.avatar,onlineUsers:0,msg:a.value,Code:1};u.send(JSON.stringify(n)),a.value=""},s=n=>_.state.uname===n.uname;let d=m(!1),L=m("");const c=(n,i="#a3ea4d",r=5e3)=>{L.value=n,d.value=!0,setTimeout(()=>{let y=document.getElementById("hint");y.style.background=i,y.style.height="30px",setTimeout(()=>{y.style.height="0"},r),setTimeout(()=>{d.value=!1},r+500)},100)};return k(()=>a.value,n=>{f.value=n.length},{deep:!0}),u.onclose=()=>{c("\u670D\u52A1\u5668\u65AD\u5F00\u8FDE\u63A5!!!","red",9e5)},document.onkeydown=n=>{n.key==="Enter"&&p()},{ws:u,showHint:d,HintMsg:L,usersList:l,store:_,wordCount:f,text:a,msgList:t,hint:c,sendMessage:p,isMyMsg:s}}});const S={id:"background"},B={id:"cont"},E={id:"bar"},$={id:"ma"},H={id:"left"},N=["src"],T={id:"right"},J={id:"m_top"},O={id:"msgList"},U=["src"],I={id:"myMsgList_cont"},V={id:"msgList_uname"},W={id:"msgList_msg"},j={id:"myMsgList"},q=["src"],z={id:"myMsgList_cont"},G={id:"myMsgList_uname"},K={id:"myMsgList_msg"},P={id:"m_button"},Q={id:"wordCount"};function R(t,a,f,l,u,p){return v(),g("div",S,[e("div",B,[e("div",E,[e("p",null,"\u5F53\u524D\u5728\u7EBF\u7528\u6237:"+o(t.usersList.length),1)]),e("div",$,[h(e("div",{id:"hint"},o(t.HintMsg),513),[[M,t.showHint]]),e("div",H,[(v(!0),g(w,null,F(t.usersList,(s,d)=>(v(),g("div",{key:d,id:"online"},[e("img",{alt:"\u5934\u50CF\u52A0\u8F7D\u5931\u8D25!",src:t.store.state.srcS[s.avatar]},null,8,N),e("div",null,o(s.uname),1)]))),128))]),e("div",T,[e("div",J,[(v(!0),g(w,null,F(t.msgList,(s,d)=>(v(),g("div",{key:d},[h(e("div",O,[e("img",{id:"myMsgList_avatar",alt:"",src:t.store.state.srcS[s.avatar]},null,8,U),e("div",I,[e("div",V,o(s.uname),1),e("div",W,o(s.msg),1)])],512),[[M,!t.isMyMsg(s)]]),h(e("div",j,[e("img",{id:"myMsgList_avatar",alt:"",src:t.store.state.srcS[s.avatar]},null,8,q),e("div",z,[e("div",G,o(s.uname),1),e("div",K,o(s.msg),1)])],512),[[M,t.isMyMsg(s)]])]))),128))]),e("div",P,[h(e("textarea",{id:"text","onUpdate:modelValue":a[0]||(a[0]=s=>t.text=s),maxlength:"9999"},`\r
\r
            `,512),[[b,t.text]]),e("div",Q,o(t.wordCount)+"/9999",1),e("button",{type:"button",id:"text_button",onClick:a[1]||(a[1]=(...s)=>t.sendMessage&&t.sendMessage(...s))},"\u53D1\u9001")])])])])])}const Y=C(A,[["render",R],["__scopeId","data-v-4fff7d8a"]]);export{Y as default};
